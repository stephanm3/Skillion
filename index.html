<!DOCTYPE html>
<html>
   <head>
      <title>Page Title</title>
      <meta charset="utf-8">
      <meta name="viewport"  content="width=device-width, height=device-height, initial-scale=0.8, user-scalable=1" />
      <!-- external Styling -->
      <link rel="stylesheet" href="css/styles.css">
      <link rel="stylesheet" href="css/progressbar.css">
      <link rel="stylesheet" href="css/buttons.css">
      <link rel="stylesheet" href="css/tables.css">
      <!-- internal Styling -->
      <style>
         body {background-color:lightgray}
         h1   {color:blue}
         p    {color:green}
         td {
         vertical-align: bottom;
         padding: 4px;
         }
      </style>
   </head>
   <body id="bodyID"; 
      background="pics/road1.jpg"
      style="margin: 0px;background-repeat: no-repeat; background-size: 100% 100%;">

      <table style="width: 100%; border: 0px ">
         <!-- the company name -->
         <tr>
            <td style="padding-top: 0px;">
               <div class="text3d1"">
                  <center>Skillion</center>
               </div>
            </td>
            <!-- empty row -->	
         </tr>
         <tr>
            <td style="padding-top: 0px; padding-bottom: 0px"></td>
         </tr>
         <!-- info box -->
         <tr>
            <td style="padding-top: 0px; padding-bottom: 0px">
               <center>
                  <div class="shadowSheet"  >
                     <h4>7.77</h4>
                  </div>
               </center>
            </td>
         <tr>
            <td>
               <table class="progBars" width="100%" style="width: 100%; border: 0px;">
                  <tr width="100%" >
                     <td padding="0px">
                     </td>
                     <td >
                     </td>
                     <td >
                     </td>
                  </tr>
                  <tr>
                     <td width="45%" >
                        <otto style="color:#555; text-shadow: 1px 1px 1px green">
                           <left>Speed</left>
                        </otto>
                     </td>
                     <td width="0%" >
                     </td>
                     <td width="100%">
                        <center>
                           <div id="progressBar1" class="round-pink1">
                              <div style="float:left;"></div>
                           </div>
                        </center>
                     </td>
                  <tr>
                  <tr>
                     <td>
                        <otto style="color:#555; text-shadow: 1px 1px 1px yellow">
                           <left>Cadence</left>
                        </otto>
                     </td>
                     <td>
                     </td>
                     <td>
                        <center>
                           <div id="progressBar2" class="round-pink2">
                              <div style="float:left;"></div>
                           </div>
                        </center>
                     </td>
                  <tr>
                  <tr>
                     <td>
                        <otto style="color:#555; text-shadow: 1px 1px 1px red">
                           <left>Electric Power</left>
                        </otto>
                     </td>
                     <td>
                     </td>
                     <td>
                        <center>
                           <div id="progressBar3" class="round-pink3">
                              <div style="float:left;"></div>
                           </div>
                        </center>
                     </td>
                  <tr>
               </table>
            </td>
         </tr>
         <tr>
            <td style="padding-top: 0px; padding-bottom: 0px"></td>
         </tr>
         <tr>
            <td style="padding-top: 20px;">
               <center>
                  <div id="buttons"> 
                     <a href="#" class="action-button shadow animate green" onclick="starting()">Start</a>
                     <a href="#" class="action-button shadow animate red" onclick="stopping()">Stop</a>
                     <a href="#" class="action-button shadow animate blue" onclick="resetting()">Reset</a>
                  </div>
               </center>
            </td>
         </tr>
         <tr>
            <td style="padding-top: 5px; padding-bottom: 5px"></td>
         </tr>
      </table>
      <table class="table3">
         <thead>
            <tr>
               <th style="padding:0px 0px;"></th>
               <th scope="col" abbr="Time">Time</th>
               <th scope="col" abbr="Speed">Speed</th>
               <th scope="col" abbr="Cadence">Cadence</th>
               <th scope="col" abbr="Electric">Electric</th>
            </tr>
         </thead>
         <tfoot>
            <tr>
               <th style="padding:0px 0px;"></th>
               <td><span id="avgTime">Avg</span></td>
               <td><span id="avgSpeed" style="vertical-align: bottom">0 </span> <font style="font-size: 8px;opacity: .8; background-color: transparent;">kmh</font></td>
               <td><span id="avgCadence">0</span></td>
               <td><span id="avgElectric" style="vertical-align: bottom">0 </span><font style="font-size: 8px;opacity: .8;background-color: transparent;">W</font></td>
            </tr>
         </tfoot>
         <tbody>
            <tr>
               <th style="padding:0px 0px;"></th>
               <td><span id="liveTime">0:00</span></td>
               <td><span id="liveSpeed" style="vertical-align: middle">0 </span><font style="font-size: 8px;">kmh</font></td>
               <td><span id="liveCadence">0</span></td>
               <td><span id="liveElectric" style="vertical-align: middle">0 </span><font style="font-size: 8px;">W</font></td>
            </tr>
         </tbody>
      </table>
      <div style="opacity: 1;">
         <table width="100%" cellspacing="10">
            <tr>
               <td style="padding-top: 5px; padding-bottom: 0px"></td>
            </tr>
 
            <tr class="blackBand" width:100%>
               <td>
                  eFatBikes
                  <a href="http://www.efatbike.com.au/" target="_blank"><img src="pics/arrow2.jpg"  height="15"> </a>
                  SydneyStartups
                  <a href="http://www.sydneystartups.com.au/" target="_blank"><img src="pics/arrow2.jpg"  height="15"> </a>
               </td>
            </tr>
         </table>
      </div>
      <!-- ############################################################# -->
      <!-- ############################################################# -->
      <!-- ############################################################# -->
      <!-- ############################################################# -->
      <!-- zepto -->
      <script src=js/zepto.min.js></script>
      <script src=js/fx.js></script>
      <script>
         var con=document.getElementById('bodyID');
         
         con.addEventListener('gesturechange',function(e){
             if(e.scale>1)
             {
                 //zoom in 
             }
             else if(e.scale<1)
             {
                 //zoom out 
             }
         });
      </script>
      <!-- progress bar -->
      <script>
         function progressBar(percent, $element) {
         	var progressBarWidth = percent * $element.width() / 100;
         	$element.find('div').animate({ width: progressBarWidth }, 450).html(percent + "%&nbsp;");
         }
      </script>
      <script>
         progressBar(0, $('#progressBar1'));
         progressBar(0, $('#progressBar2'));
         progressBar(0, $('#progressBar3'));
      </script>
      <script>
         $('#demo').animate({
           opacity: 0.50, top: '30px', color: '#656565'
         }, 0.5);
      </script>
      <script>
         // execute callback when the page is ready:
         Zepto(function($){
           
         })
         
         setInterval(time1, 500);
         //setInterval(time2, 1000);
         
         var val = [0,0,0];
         var progBarID =  ['#progressBar1', '#progressBar2', '#progressBar3'];
         
         
         
         // update the progress bars 
         //this will repeat every x seconds
         function time1( )
         {
           dist = 2;
         
           for (var i in val) 
           {
             //alert(array[i]);
          
             xxx = Math.floor((Math.random() * 100) + 1);
             if(xxx > val[i])
             {
               if(xxx > (val[i]+dist)){val[i] += dist} else {val[i] = xxx};
             }
             else
             {
               if(xxx < (val[i]-dist)){val[i] -= dist} else {val[i] = xxx};
             }
             if(val[i] < 0){val[i] = 0}
             if(val[i] > 100){val[i] = 100}
             
             //$("#test").replaceWith("<div id='test'>" + val[i] + "</div>");
             
             progressBar(val[i], $(progBarID[i]));
           }
         
         }
         
         var seconds = 0;
         var liveVars = [0,0,0,0];
         var avgVars =  [0,0,0,0];
         var sumVars =  [0,0,0,0];
         var timer;
         
         function starting()
         {
           //seconds = 0;
           //liveVars = [0,0,0,0];
           //avgVars =  [0,0,0,0];
           //sumVars =  [0,0,0,0]; 
           clearInterval(timer);
           timer = setInterval(function(){ time2() }, 1000);  
         }
         
         function stopping()
         {
           clearInterval(timer);
           
         }
         
         function resetting()
         {
           seconds = 0;
           liveVars = [0,0,0,0];
           avgVars =  [0,0,0,0];
           sumVars =  [0,0,0,0]; 
           time2(1);
         }
         
         
         // update the data table
         function time2( reset )
         {
           
           // attend to the time
           seconds += 1;
           var hours = Math.floor(seconds / 3600);
           var minutes = Math.floor(seconds / 60);
           var minutes = Math.floor(minutes % 60);
           liveVars[0] = hours + ':' + minutes;
           if(seconds % 2)
             {$('#liveTime').html('<font style="color: blue"> ' + liveVars[0] + "<font>");} 
           else  
             {$('#liveTime').html('<font style="color: #444"> ' + liveVars[0] + "<font>");} 
           $('#liveTime').style = "color: blue;";
           //$('#avgTime').html(liveVars[0] + ' ');
           
           
           // attend to the speed
           xxx = 8 + Math.floor((Math.random() * 10) + 1);
           xxx = 0.2*xxx + 0.8*liveVars[1];
           if(reset){xxx = 0};
           liveVars[1] = Math.round(xxx);
           sumVars[1] += xxx;
           avgVars[1] = Math.round(sumVars[1] / seconds);
           $('#liveSpeed').html(liveVars[1] + ' ');
           $('#avgSpeed').html(avgVars[1] + ' ');
           
           
          // attend to the cadence
           xxx = 100 + Math.floor((Math.random() * 40) + 1);
         if(reset){xxx = 0};
           sumVars[2] += xxx;
           avgVars[2] = Math.round(sumVars[2] / seconds);
           $('#liveCadence').html(xxx);
           $('#avgCadence').html(avgVars[2]);
             
            
          // attend to the electric
           xxx = 100 + Math.floor((Math.random() * 100) + 1);
         if(reset){xxx = 0};
           sumVars[3] += xxx;
           avgVars[3] = Math.round(sumVars[3] / seconds);
           $('#liveElectric').html(xxx + ' ');
           $('#avgElectric').html(avgVars[3] + ' ');
              
           
          
         
         }    
         
         
      </script>
   </body>
</html>